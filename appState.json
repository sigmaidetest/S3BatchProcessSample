{"EDITOR_STATE":{"allProjectFiles":{"10a5cd4a-4fd8-443a-a941-5a727a63a629":{"id":"10a5cd4a-4fd8-443a-a941-5a727a63a629","parent":null,"name":"S3BatchProcessSample","type":"DIRECTORY","isDirectory":true,"children":["321bc1a2-9505-4f05-a344-9474383648a4","53f45614-d366-43e5-97aa-625345d6333c"],"isRemovable":false,"filePath":"S3BatchProcessSample"},"321bc1a2-9505-4f05-a344-9474383648a4":{"id":"321bc1a2-9505-4f05-a344-9474383648a4","parent":"10a5cd4a-4fd8-443a-a941-5a727a63a629","name":"lambda.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"S3BatchProcessSample/lambda.js","code":"let notificationUtils = require(\"./NotificationUtils.js\");\n\nlet AWS = require('aws-sdk');\nconst s3 = new AWS.S3();\nexports.handler = function (event, context, callback) {\n\n\tconsole.log(`Batch process triggered at ${event.time}`);\n\tnotificationUtils.sendNotification(\"Batch Process Started\", `Batch process started at ${event.time}`)\n\n\ts3.listObjects({\n\t\t'Bucket': 'slapp-batch-process-sample',\n\t\t'MaxKeys': 100,\n\t\t'Prefix': ''\n\t}).promise()\n\t\t.then(data => {\n\t\t\tlet numFiles = data.Contents.length;\n\t\t\tconsole.log(`${numFiles} files found to process`);\n\t\t\tdata.Contents.forEach(file => {\n\t\t\t\tlet fileName = file.Key;\n\t\t\t\tconsole.log(`Processing File : ${fileName}`);\n\n\t\t\t\ts3.deleteObject({\n\t\t\t\t\t'Bucket': \"slapp-batch-process-sample\",\n\t\t\t\t\t'Key': fileName\n\t\t\t\t}).promise()\n\t\t\t\t\t.then(data => {\n\t\t\t\t\t\tconsole.log(`Successfully deleted file ${fileName}`); \n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.log(`Failed to delete file : ${fileName}`, err, err.stack);\n\t\t\t\t\t\tcallback(err, `Failed to delete file : ${fileName}`);\n\t\t\t\t\t});\n\t\t\t});\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.log(\"Failed to get file list\", err, err.stack); // an error occurred\n\t\t\tcallback(err, \"Failed to get file list\");\n\t\t});\n\n\tcallback(null, 'Successfully executed');\n}","ast":{"type":"File","start":0,"end":1232,"loc":{"start":{"line":1,"column":0},"end":{"line":41,"column":1}},"program":{"type":"Program","start":0,"end":1232,"loc":{"start":{"line":1,"column":0},"end":{"line":41,"column":1}},"sourceType":"module","body":[{"type":"VariableDeclaration","start":0,"end":58,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":58}},"declarations":[{"type":"VariableDeclarator","start":4,"end":57,"loc":{"start":{"line":1,"column":4},"end":{"line":1,"column":57}},"id":{"type":"Identifier","start":4,"end":21,"loc":{"start":{"line":1,"column":4},"end":{"line":1,"column":21},"identifierName":"notificationUtils"},"name":"notificationUtils"},"init":{"type":"CallExpression","start":24,"end":57,"loc":{"start":{"line":1,"column":24},"end":{"line":1,"column":57}},"callee":{"type":"Identifier","start":24,"end":31,"loc":{"start":{"line":1,"column":24},"end":{"line":1,"column":31},"identifierName":"require"},"name":"require"},"arguments":[{"type":"StringLiteral","start":32,"end":56,"loc":{"start":{"line":1,"column":32},"end":{"line":1,"column":56}},"extra":{"rawValue":"./NotificationUtils.js","raw":"\"./NotificationUtils.js\""},"value":"./NotificationUtils.js"}]}}],"kind":"let"},{"type":"VariableDeclaration","start":60,"end":89,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"declarations":[{"type":"VariableDeclarator","start":64,"end":88,"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":28}},"id":{"type":"Identifier","start":64,"end":67,"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":7},"identifierName":"AWS"},"name":"AWS"},"init":{"type":"CallExpression","start":70,"end":88,"loc":{"start":{"line":3,"column":10},"end":{"line":3,"column":28}},"callee":{"type":"Identifier","start":70,"end":77,"loc":{"start":{"line":3,"column":10},"end":{"line":3,"column":17},"identifierName":"require"},"name":"require"},"arguments":[{"type":"StringLiteral","start":78,"end":87,"loc":{"start":{"line":3,"column":18},"end":{"line":3,"column":27}},"extra":{"rawValue":"aws-sdk","raw":"'aws-sdk'"},"value":"aws-sdk"}]}}],"kind":"let"},{"type":"VariableDeclaration","start":90,"end":114,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":24}},"declarations":[{"type":"VariableDeclarator","start":96,"end":113,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":23}},"id":{"type":"Identifier","start":96,"end":98,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":8},"identifierName":"s3"},"name":"s3"},"init":{"type":"NewExpression","start":101,"end":113,"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":23}},"callee":{"type":"MemberExpression","start":105,"end":111,"loc":{"start":{"line":4,"column":15},"end":{"line":4,"column":21}},"object":{"type":"Identifier","start":105,"end":108,"loc":{"start":{"line":4,"column":15},"end":{"line":4,"column":18},"identifierName":"AWS"},"name":"AWS"},"property":{"type":"Identifier","start":109,"end":111,"loc":{"start":{"line":4,"column":19},"end":{"line":4,"column":21},"identifierName":"S3"},"name":"S3"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":115,"end":1232,"loc":{"start":{"line":5,"column":0},"end":{"line":41,"column":1}},"expression":{"type":"AssignmentExpression","start":115,"end":1232,"loc":{"start":{"line":5,"column":0},"end":{"line":41,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":115,"end":130,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":15}},"object":{"type":"Identifier","start":115,"end":122,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":7},"identifierName":"exports"},"name":"exports"},"property":{"type":"Identifier","start":123,"end":130,"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":15},"identifierName":"handler"},"name":"handler"},"computed":false},"right":{"type":"FunctionExpression","start":133,"end":1232,"loc":{"start":{"line":5,"column":18},"end":{"line":41,"column":1}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","start":143,"end":148,"loc":{"start":{"line":5,"column":28},"end":{"line":5,"column":33},"identifierName":"event"},"name":"event"},{"type":"Identifier","start":150,"end":157,"loc":{"start":{"line":5,"column":35},"end":{"line":5,"column":42},"identifierName":"context"},"name":"context"},{"type":"Identifier","start":159,"end":167,"loc":{"start":{"line":5,"column":44},"end":{"line":5,"column":52},"identifierName":"callback"},"name":"callback"}],"body":{"type":"BlockStatement","start":169,"end":1232,"loc":{"start":{"line":5,"column":54},"end":{"line":41,"column":1}},"body":[{"type":"ExpressionStatement","start":173,"end":229,"loc":{"start":{"line":7,"column":1},"end":{"line":7,"column":57}},"expression":{"type":"CallExpression","start":173,"end":228,"loc":{"start":{"line":7,"column":1},"end":{"line":7,"column":56}},"callee":{"type":"MemberExpression","start":173,"end":184,"loc":{"start":{"line":7,"column":1},"end":{"line":7,"column":12}},"object":{"type":"Identifier","start":173,"end":180,"loc":{"start":{"line":7,"column":1},"end":{"line":7,"column":8},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":181,"end":184,"loc":{"start":{"line":7,"column":9},"end":{"line":7,"column":12},"identifierName":"log"},"name":"log"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":185,"end":227,"loc":{"start":{"line":7,"column":13},"end":{"line":7,"column":55}},"expressions":[{"type":"MemberExpression","start":215,"end":225,"loc":{"start":{"line":7,"column":43},"end":{"line":7,"column":53}},"object":{"type":"Identifier","start":215,"end":220,"loc":{"start":{"line":7,"column":43},"end":{"line":7,"column":48},"identifierName":"event"},"name":"event"},"property":{"type":"Identifier","start":221,"end":225,"loc":{"start":{"line":7,"column":49},"end":{"line":7,"column":53},"identifierName":"time"},"name":"time"},"computed":false}],"quasis":[{"type":"TemplateElement","start":186,"end":213,"loc":{"start":{"line":7,"column":14},"end":{"line":7,"column":41}},"value":{"raw":"Batch process triggered at ","cooked":"Batch process triggered at "},"tail":false},{"type":"TemplateElement","start":226,"end":226,"loc":{"start":{"line":7,"column":54},"end":{"line":7,"column":54}},"value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","start":231,"end":332,"loc":{"start":{"line":8,"column":1},"end":{"line":8,"column":102}},"expression":{"type":"CallExpression","start":231,"end":332,"loc":{"start":{"line":8,"column":1},"end":{"line":8,"column":102}},"callee":{"type":"MemberExpression","start":231,"end":265,"loc":{"start":{"line":8,"column":1},"end":{"line":8,"column":35}},"object":{"type":"Identifier","start":231,"end":248,"loc":{"start":{"line":8,"column":1},"end":{"line":8,"column":18},"identifierName":"notificationUtils"},"name":"notificationUtils"},"property":{"type":"Identifier","start":249,"end":265,"loc":{"start":{"line":8,"column":19},"end":{"line":8,"column":35},"identifierName":"sendNotification"},"name":"sendNotification"},"computed":false},"arguments":[{"type":"StringLiteral","start":266,"end":289,"loc":{"start":{"line":8,"column":36},"end":{"line":8,"column":59}},"extra":{"rawValue":"Batch Process Started","raw":"\"Batch Process Started\""},"value":"Batch Process Started"},{"type":"TemplateLiteral","start":291,"end":331,"loc":{"start":{"line":8,"column":61},"end":{"line":8,"column":101}},"expressions":[{"type":"MemberExpression","start":319,"end":329,"loc":{"start":{"line":8,"column":89},"end":{"line":8,"column":99}},"object":{"type":"Identifier","start":319,"end":324,"loc":{"start":{"line":8,"column":89},"end":{"line":8,"column":94},"identifierName":"event"},"name":"event"},"property":{"type":"Identifier","start":325,"end":329,"loc":{"start":{"line":8,"column":95},"end":{"line":8,"column":99},"identifierName":"time"},"name":"time"},"computed":false}],"quasis":[{"type":"TemplateElement","start":292,"end":317,"loc":{"start":{"line":8,"column":62},"end":{"line":8,"column":87}},"value":{"raw":"Batch process started at ","cooked":"Batch process started at "},"tail":false},{"type":"TemplateElement","start":330,"end":330,"loc":{"start":{"line":8,"column":100},"end":{"line":8,"column":100}},"value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","start":335,"end":1187,"loc":{"start":{"line":10,"column":1},"end":{"line":38,"column":5}},"expression":{"type":"CallExpression","start":335,"end":1186,"loc":{"start":{"line":10,"column":1},"end":{"line":38,"column":4}},"callee":{"type":"MemberExpression","start":335,"end":1047,"loc":{"start":{"line":10,"column":1},"end":{"line":35,"column":8}},"object":{"type":"CallExpression","start":335,"end":1038,"loc":{"start":{"line":10,"column":1},"end":{"line":34,"column":4}},"callee":{"type":"MemberExpression","start":335,"end":448,"loc":{"start":{"line":10,"column":1},"end":{"line":15,"column":7}},"object":{"type":"CallExpression","start":335,"end":440,"loc":{"start":{"line":10,"column":1},"end":{"line":14,"column":13}},"callee":{"type":"MemberExpression","start":335,"end":438,"loc":{"start":{"line":10,"column":1},"end":{"line":14,"column":11}},"object":{"type":"CallExpression","start":335,"end":430,"loc":{"start":{"line":10,"column":1},"end":{"line":14,"column":3}},"callee":{"type":"MemberExpression","start":335,"end":349,"loc":{"start":{"line":10,"column":1},"end":{"line":10,"column":15}},"object":{"type":"Identifier","start":335,"end":337,"loc":{"start":{"line":10,"column":1},"end":{"line":10,"column":3},"identifierName":"s3"},"name":"s3"},"property":{"type":"Identifier","start":338,"end":349,"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":15},"identifierName":"listObjects"},"name":"listObjects"},"computed":false},"arguments":[{"type":"ObjectExpression","start":350,"end":429,"loc":{"start":{"line":10,"column":16},"end":{"line":14,"column":2}},"properties":[{"type":"ObjectProperty","start":354,"end":392,"loc":{"start":{"line":11,"column":2},"end":{"line":11,"column":40}},"method":false,"key":{"type":"StringLiteral","start":354,"end":362,"loc":{"start":{"line":11,"column":2},"end":{"line":11,"column":10}},"extra":{"rawValue":"Bucket","raw":"'Bucket'"},"value":"Bucket"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","start":364,"end":392,"loc":{"start":{"line":11,"column":12},"end":{"line":11,"column":40}},"extra":{"rawValue":"slapp-batch-process-sample","raw":"'slapp-batch-process-sample'"},"value":"slapp-batch-process-sample"}},{"type":"ObjectProperty","start":396,"end":410,"loc":{"start":{"line":12,"column":2},"end":{"line":12,"column":16}},"method":false,"key":{"type":"StringLiteral","start":396,"end":405,"loc":{"start":{"line":12,"column":2},"end":{"line":12,"column":11}},"extra":{"rawValue":"MaxKeys","raw":"'MaxKeys'"},"value":"MaxKeys"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","start":407,"end":410,"loc":{"start":{"line":12,"column":13},"end":{"line":12,"column":16}},"extra":{"rawValue":100,"raw":"100"},"value":100}},{"type":"ObjectProperty","start":414,"end":426,"loc":{"start":{"line":13,"column":2},"end":{"line":13,"column":14}},"method":false,"key":{"type":"StringLiteral","start":414,"end":422,"loc":{"start":{"line":13,"column":2},"end":{"line":13,"column":10}},"extra":{"rawValue":"Prefix","raw":"'Prefix'"},"value":"Prefix"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","start":424,"end":426,"loc":{"start":{"line":13,"column":12},"end":{"line":13,"column":14}},"extra":{"rawValue":"","raw":"''"},"value":""}}]}]},"property":{"type":"Identifier","start":431,"end":438,"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":11},"identifierName":"promise"},"name":"promise"},"computed":false},"arguments":[]},"property":{"type":"Identifier","start":444,"end":448,"loc":{"start":{"line":15,"column":3},"end":{"line":15,"column":7},"identifierName":"then"},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":449,"end":1037,"loc":{"start":{"line":15,"column":8},"end":{"line":34,"column":3}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","start":449,"end":453,"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":12},"identifierName":"data"},"name":"data"}],"body":{"type":"BlockStatement","start":457,"end":1037,"loc":{"start":{"line":15,"column":16},"end":{"line":34,"column":3}},"body":[{"type":"VariableDeclaration","start":462,"end":498,"loc":{"start":{"line":16,"column":3},"end":{"line":16,"column":39}},"declarations":[{"type":"VariableDeclarator","start":466,"end":497,"loc":{"start":{"line":16,"column":7},"end":{"line":16,"column":38}},"id":{"type":"Identifier","start":466,"end":474,"loc":{"start":{"line":16,"column":7},"end":{"line":16,"column":15},"identifierName":"numFiles"},"name":"numFiles"},"init":{"type":"MemberExpression","start":477,"end":497,"loc":{"start":{"line":16,"column":18},"end":{"line":16,"column":38}},"object":{"type":"MemberExpression","start":477,"end":490,"loc":{"start":{"line":16,"column":18},"end":{"line":16,"column":31}},"object":{"type":"Identifier","start":477,"end":481,"loc":{"start":{"line":16,"column":18},"end":{"line":16,"column":22},"identifierName":"data"},"name":"data"},"property":{"type":"Identifier","start":482,"end":490,"loc":{"start":{"line":16,"column":23},"end":{"line":16,"column":31},"identifierName":"Contents"},"name":"Contents"},"computed":false},"property":{"type":"Identifier","start":491,"end":497,"loc":{"start":{"line":16,"column":32},"end":{"line":16,"column":38},"identifierName":"length"},"name":"length"},"computed":false}}],"kind":"let"},{"type":"ExpressionStatement","start":502,"end":552,"loc":{"start":{"line":17,"column":3},"end":{"line":17,"column":53}},"expression":{"type":"CallExpression","start":502,"end":551,"loc":{"start":{"line":17,"column":3},"end":{"line":17,"column":52}},"callee":{"type":"MemberExpression","start":502,"end":513,"loc":{"start":{"line":17,"column":3},"end":{"line":17,"column":14}},"object":{"type":"Identifier","start":502,"end":509,"loc":{"start":{"line":17,"column":3},"end":{"line":17,"column":10},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":510,"end":513,"loc":{"start":{"line":17,"column":11},"end":{"line":17,"column":14},"identifierName":"log"},"name":"log"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":514,"end":550,"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":51}},"expressions":[{"type":"Identifier","start":517,"end":525,"loc":{"start":{"line":17,"column":18},"end":{"line":17,"column":26},"identifierName":"numFiles"},"name":"numFiles"}],"quasis":[{"type":"TemplateElement","start":515,"end":515,"loc":{"start":{"line":17,"column":16},"end":{"line":17,"column":16}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":526,"end":549,"loc":{"start":{"line":17,"column":27},"end":{"line":17,"column":50}},"value":{"raw":" files found to process","cooked":" files found to process"},"tail":true}]}]}},{"type":"ExpressionStatement","start":556,"end":1033,"loc":{"start":{"line":18,"column":3},"end":{"line":33,"column":6}},"expression":{"type":"CallExpression","start":556,"end":1032,"loc":{"start":{"line":18,"column":3},"end":{"line":33,"column":5}},"callee":{"type":"MemberExpression","start":556,"end":577,"loc":{"start":{"line":18,"column":3},"end":{"line":18,"column":24}},"object":{"type":"MemberExpression","start":556,"end":569,"loc":{"start":{"line":18,"column":3},"end":{"line":18,"column":16}},"object":{"type":"Identifier","start":556,"end":560,"loc":{"start":{"line":18,"column":3},"end":{"line":18,"column":7},"identifierName":"data"},"name":"data"},"property":{"type":"Identifier","start":561,"end":569,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":16},"identifierName":"Contents"},"name":"Contents"},"computed":false},"property":{"type":"Identifier","start":570,"end":577,"loc":{"start":{"line":18,"column":17},"end":{"line":18,"column":24},"identifierName":"forEach"},"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":578,"end":1031,"loc":{"start":{"line":18,"column":25},"end":{"line":33,"column":4}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","start":578,"end":582,"loc":{"start":{"line":18,"column":25},"end":{"line":18,"column":29},"identifierName":"file"},"name":"file"}],"body":{"type":"BlockStatement","start":586,"end":1031,"loc":{"start":{"line":18,"column":33},"end":{"line":33,"column":4}},"body":[{"type":"VariableDeclaration","start":592,"end":616,"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":28}},"declarations":[{"type":"VariableDeclarator","start":596,"end":615,"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":27}},"id":{"type":"Identifier","start":596,"end":604,"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":16},"identifierName":"fileName"},"name":"fileName"},"init":{"type":"MemberExpression","start":607,"end":615,"loc":{"start":{"line":19,"column":19},"end":{"line":19,"column":27}},"object":{"type":"Identifier","start":607,"end":611,"loc":{"start":{"line":19,"column":19},"end":{"line":19,"column":23},"identifierName":"file"},"name":"file"},"property":{"type":"Identifier","start":612,"end":615,"loc":{"start":{"line":19,"column":24},"end":{"line":19,"column":27},"identifierName":"Key"},"name":"Key"},"computed":false}}],"kind":"let"},{"type":"ExpressionStatement","start":621,"end":666,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":49}},"expression":{"type":"CallExpression","start":621,"end":665,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":48}},"callee":{"type":"MemberExpression","start":621,"end":632,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":15}},"object":{"type":"Identifier","start":621,"end":628,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":11},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":629,"end":632,"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":15},"identifierName":"log"},"name":"log"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":633,"end":664,"loc":{"start":{"line":20,"column":16},"end":{"line":20,"column":47}},"expressions":[{"type":"Identifier","start":654,"end":662,"loc":{"start":{"line":20,"column":37},"end":{"line":20,"column":45},"identifierName":"fileName"},"name":"fileName"}],"quasis":[{"type":"TemplateElement","start":634,"end":652,"loc":{"start":{"line":20,"column":17},"end":{"line":20,"column":35}},"value":{"raw":"Processing File : ","cooked":"Processing File : "},"tail":false},{"type":"TemplateElement","start":663,"end":663,"loc":{"start":{"line":20,"column":46},"end":{"line":20,"column":46}},"value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","start":672,"end":1026,"loc":{"start":{"line":22,"column":4},"end":{"line":32,"column":8}},"expression":{"type":"CallExpression","start":672,"end":1025,"loc":{"start":{"line":22,"column":4},"end":{"line":32,"column":7}},"callee":{"type":"MemberExpression","start":672,"end":874,"loc":{"start":{"line":22,"column":4},"end":{"line":29,"column":11}},"object":{"type":"CallExpression","start":672,"end":862,"loc":{"start":{"line":22,"column":4},"end":{"line":28,"column":7}},"callee":{"type":"MemberExpression","start":672,"end":783,"loc":{"start":{"line":22,"column":4},"end":{"line":26,"column":10}},"object":{"type":"CallExpression","start":672,"end":772,"loc":{"start":{"line":22,"column":4},"end":{"line":25,"column":16}},"callee":{"type":"MemberExpression","start":672,"end":770,"loc":{"start":{"line":22,"column":4},"end":{"line":25,"column":14}},"object":{"type":"CallExpression","start":672,"end":762,"loc":{"start":{"line":22,"column":4},"end":{"line":25,"column":6}},"callee":{"type":"MemberExpression","start":672,"end":687,"loc":{"start":{"line":22,"column":4},"end":{"line":22,"column":19}},"object":{"type":"Identifier","start":672,"end":674,"loc":{"start":{"line":22,"column":4},"end":{"line":22,"column":6},"identifierName":"s3"},"name":"s3"},"property":{"type":"Identifier","start":675,"end":687,"loc":{"start":{"line":22,"column":7},"end":{"line":22,"column":19},"identifierName":"deleteObject"},"name":"deleteObject"},"computed":false},"arguments":[{"type":"ObjectExpression","start":688,"end":761,"loc":{"start":{"line":22,"column":20},"end":{"line":25,"column":5}},"properties":[{"type":"ObjectProperty","start":695,"end":733,"loc":{"start":{"line":23,"column":5},"end":{"line":23,"column":43}},"method":false,"key":{"type":"StringLiteral","start":695,"end":703,"loc":{"start":{"line":23,"column":5},"end":{"line":23,"column":13}},"extra":{"rawValue":"Bucket","raw":"'Bucket'"},"value":"Bucket"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","start":705,"end":733,"loc":{"start":{"line":23,"column":15},"end":{"line":23,"column":43}},"extra":{"rawValue":"slapp-batch-process-sample","raw":"\"slapp-batch-process-sample\""},"value":"slapp-batch-process-sample"}},{"type":"ObjectProperty","start":740,"end":755,"loc":{"start":{"line":24,"column":5},"end":{"line":24,"column":20}},"method":false,"key":{"type":"StringLiteral","start":740,"end":745,"loc":{"start":{"line":24,"column":5},"end":{"line":24,"column":10}},"extra":{"rawValue":"Key","raw":"'Key'"},"value":"Key"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"@{fileName}"}}]}]},"property":{"type":"Identifier","start":763,"end":770,"loc":{"start":{"line":25,"column":7},"end":{"line":25,"column":14},"identifierName":"promise"},"name":"promise"},"computed":false},"arguments":[]},"property":{"type":"Identifier","start":779,"end":783,"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":10},"identifierName":"then"},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":784,"end":861,"loc":{"start":{"line":26,"column":11},"end":{"line":28,"column":6}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","start":784,"end":788,"loc":{"start":{"line":26,"column":11},"end":{"line":26,"column":15},"identifierName":"data"},"name":"data"}],"body":{"type":"BlockStatement","start":792,"end":861,"loc":{"start":{"line":26,"column":19},"end":{"line":28,"column":6}},"body":[{"type":"ExpressionStatement","start":800,"end":853,"loc":{"start":{"line":27,"column":6},"end":{"line":27,"column":59}},"expression":{"type":"CallExpression","start":800,"end":852,"loc":{"start":{"line":27,"column":6},"end":{"line":27,"column":58}},"callee":{"type":"MemberExpression","start":800,"end":811,"loc":{"start":{"line":27,"column":6},"end":{"line":27,"column":17}},"object":{"type":"Identifier","start":800,"end":807,"loc":{"start":{"line":27,"column":6},"end":{"line":27,"column":13},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":808,"end":811,"loc":{"start":{"line":27,"column":14},"end":{"line":27,"column":17},"identifierName":"log"},"name":"log"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":812,"end":851,"loc":{"start":{"line":27,"column":18},"end":{"line":27,"column":57}},"expressions":[{"type":"Identifier","start":841,"end":849,"loc":{"start":{"line":27,"column":47},"end":{"line":27,"column":55},"identifierName":"fileName"},"name":"fileName"}],"quasis":[{"type":"TemplateElement","start":813,"end":839,"loc":{"start":{"line":27,"column":19},"end":{"line":27,"column":45}},"value":{"raw":"Successfully deleted file ","cooked":"Successfully deleted file "},"tail":false},{"type":"TemplateElement","start":850,"end":850,"loc":{"start":{"line":27,"column":56},"end":{"line":27,"column":56}},"value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]}}]},"property":{"type":"Identifier","start":869,"end":874,"loc":{"start":{"line":29,"column":6},"end":{"line":29,"column":11},"identifierName":"catch"},"name":"catch"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":875,"end":1024,"loc":{"start":{"line":29,"column":12},"end":{"line":32,"column":6}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","start":875,"end":878,"loc":{"start":{"line":29,"column":12},"end":{"line":29,"column":15},"identifierName":"err"},"name":"err"}],"body":{"type":"BlockStatement","start":882,"end":1024,"loc":{"start":{"line":29,"column":19},"end":{"line":32,"column":6}},"body":[{"type":"ExpressionStatement","start":890,"end":957,"loc":{"start":{"line":30,"column":6},"end":{"line":30,"column":73}},"expression":{"type":"CallExpression","start":890,"end":956,"loc":{"start":{"line":30,"column":6},"end":{"line":30,"column":72}},"callee":{"type":"MemberExpression","start":890,"end":901,"loc":{"start":{"line":30,"column":6},"end":{"line":30,"column":17}},"object":{"type":"Identifier","start":890,"end":897,"loc":{"start":{"line":30,"column":6},"end":{"line":30,"column":13},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":898,"end":901,"loc":{"start":{"line":30,"column":14},"end":{"line":30,"column":17},"identifierName":"log"},"name":"log"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":902,"end":939,"loc":{"start":{"line":30,"column":18},"end":{"line":30,"column":55}},"expressions":[{"type":"Identifier","start":929,"end":937,"loc":{"start":{"line":30,"column":45},"end":{"line":30,"column":53},"identifierName":"fileName"},"name":"fileName"}],"quasis":[{"type":"TemplateElement","start":903,"end":927,"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":43}},"value":{"raw":"Failed to delete file : ","cooked":"Failed to delete file : "},"tail":false},{"type":"TemplateElement","start":938,"end":938,"loc":{"start":{"line":30,"column":54},"end":{"line":30,"column":54}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Identifier","start":941,"end":944,"loc":{"start":{"line":30,"column":57},"end":{"line":30,"column":60},"identifierName":"err"},"name":"err"},{"type":"MemberExpression","start":946,"end":955,"loc":{"start":{"line":30,"column":62},"end":{"line":30,"column":71}},"object":{"type":"Identifier","start":946,"end":949,"loc":{"start":{"line":30,"column":62},"end":{"line":30,"column":65},"identifierName":"err"},"name":"err"},"property":{"type":"Identifier","start":950,"end":955,"loc":{"start":{"line":30,"column":66},"end":{"line":30,"column":71},"identifierName":"stack"},"name":"stack"},"computed":false}]}},{"type":"ExpressionStatement","start":964,"end":1017,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":59}},"expression":{"type":"CallExpression","start":964,"end":1016,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":58}},"callee":{"type":"Identifier","start":964,"end":972,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":14},"identifierName":"callback"},"name":"callback"},"arguments":[{"type":"Identifier","start":973,"end":976,"loc":{"start":{"line":31,"column":15},"end":{"line":31,"column":18},"identifierName":"err"},"name":"err"},{"type":"TemplateLiteral","start":978,"end":1015,"loc":{"start":{"line":31,"column":20},"end":{"line":31,"column":57}},"expressions":[{"type":"Identifier","start":1005,"end":1013,"loc":{"start":{"line":31,"column":47},"end":{"line":31,"column":55},"identifierName":"fileName"},"name":"fileName"}],"quasis":[{"type":"TemplateElement","start":979,"end":1003,"loc":{"start":{"line":31,"column":21},"end":{"line":31,"column":45}},"value":{"raw":"Failed to delete file : ","cooked":"Failed to delete file : "},"tail":false},{"type":"TemplateElement","start":1014,"end":1014,"loc":{"start":{"line":31,"column":56},"end":{"line":31,"column":56}},"value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}}]},"property":{"type":"Identifier","start":1042,"end":1047,"loc":{"start":{"line":35,"column":3},"end":{"line":35,"column":8},"identifierName":"catch"},"name":"catch"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1048,"end":1185,"loc":{"start":{"line":35,"column":9},"end":{"line":38,"column":3}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","start":1048,"end":1051,"loc":{"start":{"line":35,"column":9},"end":{"line":35,"column":12},"identifierName":"err"},"name":"err"}],"body":{"type":"BlockStatement","start":1055,"end":1185,"loc":{"start":{"line":35,"column":16},"end":{"line":38,"column":3}},"body":[{"type":"ExpressionStatement","start":1060,"end":1115,"loc":{"start":{"line":36,"column":3},"end":{"line":36,"column":58}},"expression":{"type":"CallExpression","start":1060,"end":1114,"loc":{"start":{"line":36,"column":3},"end":{"line":36,"column":57}},"callee":{"type":"MemberExpression","start":1060,"end":1071,"loc":{"start":{"line":36,"column":3},"end":{"line":36,"column":14}},"object":{"type":"Identifier","start":1060,"end":1067,"loc":{"start":{"line":36,"column":3},"end":{"line":36,"column":10},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":1068,"end":1071,"loc":{"start":{"line":36,"column":11},"end":{"line":36,"column":14},"identifierName":"log"},"name":"log"},"computed":false},"arguments":[{"type":"StringLiteral","start":1072,"end":1097,"loc":{"start":{"line":36,"column":15},"end":{"line":36,"column":40}},"extra":{"rawValue":"Failed to get file list","raw":"\"Failed to get file list\""},"value":"Failed to get file list"},{"type":"Identifier","start":1099,"end":1102,"loc":{"start":{"line":36,"column":42},"end":{"line":36,"column":45},"identifierName":"err"},"name":"err"},{"type":"MemberExpression","start":1104,"end":1113,"loc":{"start":{"line":36,"column":47},"end":{"line":36,"column":56}},"object":{"type":"Identifier","start":1104,"end":1107,"loc":{"start":{"line":36,"column":47},"end":{"line":36,"column":50},"identifierName":"err"},"name":"err"},"property":{"type":"Identifier","start":1108,"end":1113,"loc":{"start":{"line":36,"column":51},"end":{"line":36,"column":56},"identifierName":"stack"},"name":"stack"},"computed":false}]},"trailingComments":[{"type":"CommentLine","value":" an error occurred","start":1116,"end":1136,"loc":{"start":{"line":36,"column":59},"end":{"line":36,"column":79}}}]},{"type":"ExpressionStatement","start":1140,"end":1181,"loc":{"start":{"line":37,"column":3},"end":{"line":37,"column":44}},"expression":{"type":"CallExpression","start":1140,"end":1180,"loc":{"start":{"line":37,"column":3},"end":{"line":37,"column":43}},"callee":{"type":"Identifier","start":1140,"end":1148,"loc":{"start":{"line":37,"column":3},"end":{"line":37,"column":11},"identifierName":"callback"},"name":"callback","leadingComments":null},"arguments":[{"type":"Identifier","start":1149,"end":1152,"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":15},"identifierName":"err"},"name":"err"},{"type":"StringLiteral","start":1154,"end":1179,"loc":{"start":{"line":37,"column":17},"end":{"line":37,"column":42}},"extra":{"rawValue":"Failed to get file list","raw":"\"Failed to get file list\""},"value":"Failed to get file list"}],"leadingComments":null},"leadingComments":[{"type":"CommentLine","value":" an error occurred","start":1116,"end":1136,"loc":{"start":{"line":36,"column":59},"end":{"line":36,"column":79}}}]}],"directives":[]}}]}},{"type":"ExpressionStatement","start":1190,"end":1230,"loc":{"start":{"line":40,"column":1},"end":{"line":40,"column":41}},"expression":{"type":"CallExpression","start":1190,"end":1229,"loc":{"start":{"line":40,"column":1},"end":{"line":40,"column":40}},"callee":{"type":"Identifier","start":1190,"end":1198,"loc":{"start":{"line":40,"column":1},"end":{"line":40,"column":9},"identifierName":"callback"},"name":"callback"},"arguments":[{"type":"NullLiteral","start":1199,"end":1203,"loc":{"start":{"line":40,"column":10},"end":{"line":40,"column":14}}},{"type":"StringLiteral","start":1205,"end":1228,"loc":{"start":{"line":40,"column":16},"end":{"line":40,"column":39}},"extra":{"rawValue":"Successfully executed","raw":"'Successfully executed'"},"value":"Successfully executed"}]}}],"directives":[]}}}}],"directives":[]},"comments":[{"type":"CommentLine","value":" an error occurred","start":1116,"end":1136,"loc":{"start":{"line":36,"column":59},"end":{"line":36,"column":79}}}]},"formatted":true,"resources":["cweS3BatchProcessTrigger","s3slappBatchProcessSample","s3slappBatchProcessSample","s3slappBatchProcessSample"],"triggers":[{"resourceName":"cweS3BatchProcessTrigger","config":{"mode":0,"name":"S3BatchProcessTrigger","description":"","scheduleExpression":"rate(2 minutes)"}}]},"53f45614-d366-43e5-97aa-625345d6333c":{"id":"53f45614-d366-43e5-97aa-625345d6333c","parent":"10a5cd4a-4fd8-443a-a941-5a727a63a629","name":"NotificationUtils.js","type":"JS_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"S3BatchProcessSample/NotificationUtils.js","code":"let AWS = require('aws-sdk');\nconst sns = new AWS.SNS();\n\nmodule.exports = {\n    sendNotification: function (subject, message) {\n        sns.publish({\n            Message: message,\n            Subject: subject,\n            MessageAttributes: {},\n            MessageStructure: 'String',\n            TopicArn: 'arn:aws:sns:us-east-1:480964559519:S3BatchProcessNotifications'\n        }).promise()\n            .then(data => {\n                console.log(\"Successfully published notification\");\n                return true;\n            })\n            .catch(err => {\n                console.err(\"Error occurred while publishing notification\", err, err.stack);\n                throw err;\n            });\n    }\n};\n","ast":{"type":"File","start":0,"end":707,"loc":{"start":{"line":1,"column":0},"end":{"line":23,"column":0}},"program":{"type":"Program","start":0,"end":707,"loc":{"start":{"line":1,"column":0},"end":{"line":23,"column":0}},"sourceType":"module","body":[{"type":"VariableDeclaration","start":0,"end":29,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":29}},"declarations":[{"type":"VariableDeclarator","start":4,"end":28,"loc":{"start":{"line":1,"column":4},"end":{"line":1,"column":28}},"id":{"type":"Identifier","start":4,"end":7,"loc":{"start":{"line":1,"column":4},"end":{"line":1,"column":7},"identifierName":"AWS"},"name":"AWS"},"init":{"type":"CallExpression","start":10,"end":28,"loc":{"start":{"line":1,"column":10},"end":{"line":1,"column":28}},"callee":{"type":"Identifier","start":10,"end":17,"loc":{"start":{"line":1,"column":10},"end":{"line":1,"column":17},"identifierName":"require"},"name":"require"},"arguments":[{"type":"StringLiteral","start":18,"end":27,"loc":{"start":{"line":1,"column":18},"end":{"line":1,"column":27}},"extra":{"rawValue":"aws-sdk","raw":"'aws-sdk'"},"value":"aws-sdk"}]}}],"kind":"let"},{"type":"VariableDeclaration","start":30,"end":56,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":26}},"declarations":[{"type":"VariableDeclarator","start":36,"end":55,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":25}},"id":{"type":"Identifier","start":36,"end":39,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":9},"identifierName":"sns"},"name":"sns"},"init":{"type":"NewExpression","start":42,"end":55,"loc":{"start":{"line":2,"column":12},"end":{"line":2,"column":25}},"callee":{"type":"MemberExpression","start":46,"end":53,"loc":{"start":{"line":2,"column":16},"end":{"line":2,"column":23}},"object":{"type":"Identifier","start":46,"end":49,"loc":{"start":{"line":2,"column":16},"end":{"line":2,"column":19},"identifierName":"AWS"},"name":"AWS"},"property":{"type":"Identifier","start":50,"end":53,"loc":{"start":{"line":2,"column":20},"end":{"line":2,"column":23},"identifierName":"SNS"},"name":"SNS"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":58,"end":706,"loc":{"start":{"line":4,"column":0},"end":{"line":22,"column":2}},"expression":{"type":"AssignmentExpression","start":58,"end":705,"loc":{"start":{"line":4,"column":0},"end":{"line":22,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":58,"end":72,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":14}},"object":{"type":"Identifier","start":58,"end":64,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":6},"identifierName":"module"},"name":"module"},"property":{"type":"Identifier","start":65,"end":72,"loc":{"start":{"line":4,"column":7},"end":{"line":4,"column":14},"identifierName":"exports"},"name":"exports"},"computed":false},"right":{"type":"ObjectExpression","start":75,"end":705,"loc":{"start":{"line":4,"column":17},"end":{"line":22,"column":1}},"properties":[{"type":"ObjectProperty","start":81,"end":703,"loc":{"start":{"line":5,"column":4},"end":{"line":21,"column":5}},"method":false,"key":{"type":"Identifier","start":81,"end":97,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":20},"identifierName":"sendNotification"},"name":"sendNotification"},"computed":false,"shorthand":false,"value":{"type":"FunctionExpression","start":99,"end":703,"loc":{"start":{"line":5,"column":22},"end":{"line":21,"column":5}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","start":109,"end":116,"loc":{"start":{"line":5,"column":32},"end":{"line":5,"column":39},"identifierName":"subject"},"name":"subject"},{"type":"Identifier","start":118,"end":125,"loc":{"start":{"line":5,"column":41},"end":{"line":5,"column":48},"identifierName":"message"},"name":"message"}],"body":{"type":"BlockStatement","start":127,"end":703,"loc":{"start":{"line":5,"column":50},"end":{"line":21,"column":5}},"body":[{"type":"ExpressionStatement","start":137,"end":697,"loc":{"start":{"line":6,"column":8},"end":{"line":20,"column":15}},"expression":{"type":"CallExpression","start":137,"end":696,"loc":{"start":{"line":6,"column":8},"end":{"line":20,"column":14}},"callee":{"type":"MemberExpression","start":137,"end":552,"loc":{"start":{"line":6,"column":8},"end":{"line":17,"column":18}},"object":{"type":"CallExpression","start":137,"end":533,"loc":{"start":{"line":6,"column":8},"end":{"line":16,"column":14}},"callee":{"type":"MemberExpression","start":137,"end":411,"loc":{"start":{"line":6,"column":8},"end":{"line":13,"column":17}},"object":{"type":"CallExpression","start":137,"end":393,"loc":{"start":{"line":6,"column":8},"end":{"line":12,"column":20}},"callee":{"type":"MemberExpression","start":137,"end":391,"loc":{"start":{"line":6,"column":8},"end":{"line":12,"column":18}},"object":{"type":"CallExpression","start":137,"end":383,"loc":{"start":{"line":6,"column":8},"end":{"line":12,"column":10}},"callee":{"type":"MemberExpression","start":137,"end":148,"loc":{"start":{"line":6,"column":8},"end":{"line":6,"column":19}},"object":{"type":"Identifier","start":137,"end":140,"loc":{"start":{"line":6,"column":8},"end":{"line":6,"column":11},"identifierName":"sns"},"name":"sns"},"property":{"type":"Identifier","start":141,"end":148,"loc":{"start":{"line":6,"column":12},"end":{"line":6,"column":19},"identifierName":"publish"},"name":"publish"},"computed":false},"arguments":[{"type":"ObjectExpression","start":149,"end":382,"loc":{"start":{"line":6,"column":20},"end":{"line":12,"column":9}},"properties":[{"type":"ObjectProperty","start":163,"end":179,"loc":{"start":{"line":7,"column":12},"end":{"line":7,"column":28}},"method":false,"key":{"type":"Identifier","start":163,"end":170,"loc":{"start":{"line":7,"column":12},"end":{"line":7,"column":19},"identifierName":"Message"},"name":"Message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"@{message}"}},{"type":"ObjectProperty","start":193,"end":209,"loc":{"start":{"line":8,"column":12},"end":{"line":8,"column":28}},"method":false,"key":{"type":"Identifier","start":193,"end":200,"loc":{"start":{"line":8,"column":12},"end":{"line":8,"column":19},"identifierName":"Subject"},"name":"Subject"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"@{subject}"}},{"type":"ObjectProperty","start":223,"end":244,"loc":{"start":{"line":9,"column":12},"end":{"line":9,"column":33}},"method":false,"key":{"type":"Identifier","start":223,"end":240,"loc":{"start":{"line":9,"column":12},"end":{"line":9,"column":29},"identifierName":"MessageAttributes"},"name":"MessageAttributes"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","start":242,"end":244,"loc":{"start":{"line":9,"column":31},"end":{"line":9,"column":33}},"properties":[]}},{"type":"ObjectProperty","start":258,"end":284,"loc":{"start":{"line":10,"column":12},"end":{"line":10,"column":38}},"method":false,"key":{"type":"Identifier","start":258,"end":274,"loc":{"start":{"line":10,"column":12},"end":{"line":10,"column":28},"identifierName":"MessageStructure"},"name":"MessageStructure"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","start":276,"end":284,"loc":{"start":{"line":10,"column":30},"end":{"line":10,"column":38}},"extra":{"rawValue":"String","raw":"'String'"},"value":"String"}},{"type":"ObjectProperty","start":298,"end":372,"loc":{"start":{"line":11,"column":12},"end":{"line":11,"column":86}},"method":false,"key":{"type":"Identifier","start":298,"end":306,"loc":{"start":{"line":11,"column":12},"end":{"line":11,"column":20},"identifierName":"TopicArn"},"name":"TopicArn"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","start":308,"end":372,"loc":{"start":{"line":11,"column":22},"end":{"line":11,"column":86}},"extra":{"rawValue":"arn:aws:sns:us-east-1:480964559519:S3BatchProcessNotifications","raw":"'arn:aws:sns:us-east-1:480964559519:S3BatchProcessNotifications'"},"value":"arn:aws:sns:us-east-1:480964559519:S3BatchProcessNotifications"}}]}]},"property":{"type":"Identifier","start":384,"end":391,"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":18},"identifierName":"promise"},"name":"promise"},"computed":false},"arguments":[]},"property":{"type":"Identifier","start":407,"end":411,"loc":{"start":{"line":13,"column":13},"end":{"line":13,"column":17},"identifierName":"then"},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":412,"end":532,"loc":{"start":{"line":13,"column":18},"end":{"line":16,"column":13}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","start":412,"end":416,"loc":{"start":{"line":13,"column":18},"end":{"line":13,"column":22},"identifierName":"data"},"name":"data"}],"body":{"type":"BlockStatement","start":420,"end":532,"loc":{"start":{"line":13,"column":26},"end":{"line":16,"column":13}},"body":[{"type":"ExpressionStatement","start":438,"end":489,"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":67}},"expression":{"type":"CallExpression","start":438,"end":488,"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":66}},"callee":{"type":"MemberExpression","start":438,"end":449,"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":27}},"object":{"type":"Identifier","start":438,"end":445,"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":23},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":446,"end":449,"loc":{"start":{"line":14,"column":24},"end":{"line":14,"column":27},"identifierName":"log"},"name":"log"},"computed":false},"arguments":[{"type":"StringLiteral","start":450,"end":487,"loc":{"start":{"line":14,"column":28},"end":{"line":14,"column":65}},"extra":{"rawValue":"Successfully published notification","raw":"\"Successfully published notification\""},"value":"Successfully published notification"}]}},{"type":"ReturnStatement","start":506,"end":518,"loc":{"start":{"line":15,"column":16},"end":{"line":15,"column":28}},"argument":{"type":"BooleanLiteral","start":513,"end":517,"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":27}},"value":true}}],"directives":[]}}]},"property":{"type":"Identifier","start":547,"end":552,"loc":{"start":{"line":17,"column":13},"end":{"line":17,"column":18},"identifierName":"catch"},"name":"catch"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":553,"end":695,"loc":{"start":{"line":17,"column":19},"end":{"line":20,"column":13}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","start":553,"end":556,"loc":{"start":{"line":17,"column":19},"end":{"line":17,"column":22},"identifierName":"err"},"name":"err"}],"body":{"type":"BlockStatement","start":560,"end":695,"loc":{"start":{"line":17,"column":26},"end":{"line":20,"column":13}},"body":[{"type":"ExpressionStatement","start":578,"end":654,"loc":{"start":{"line":18,"column":16},"end":{"line":18,"column":92}},"expression":{"type":"CallExpression","start":578,"end":653,"loc":{"start":{"line":18,"column":16},"end":{"line":18,"column":91}},"callee":{"type":"MemberExpression","start":578,"end":589,"loc":{"start":{"line":18,"column":16},"end":{"line":18,"column":27}},"object":{"type":"Identifier","start":578,"end":585,"loc":{"start":{"line":18,"column":16},"end":{"line":18,"column":23},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":586,"end":589,"loc":{"start":{"line":18,"column":24},"end":{"line":18,"column":27},"identifierName":"err"},"name":"err"},"computed":false},"arguments":[{"type":"StringLiteral","start":590,"end":636,"loc":{"start":{"line":18,"column":28},"end":{"line":18,"column":74}},"extra":{"rawValue":"Error occurred while publishing notification","raw":"\"Error occurred while publishing notification\""},"value":"Error occurred while publishing notification"},{"type":"Identifier","start":638,"end":641,"loc":{"start":{"line":18,"column":76},"end":{"line":18,"column":79},"identifierName":"err"},"name":"err"},{"type":"MemberExpression","start":643,"end":652,"loc":{"start":{"line":18,"column":81},"end":{"line":18,"column":90}},"object":{"type":"Identifier","start":643,"end":646,"loc":{"start":{"line":18,"column":81},"end":{"line":18,"column":84},"identifierName":"err"},"name":"err"},"property":{"type":"Identifier","start":647,"end":652,"loc":{"start":{"line":18,"column":85},"end":{"line":18,"column":90},"identifierName":"stack"},"name":"stack"},"computed":false}]}},{"type":"ThrowStatement","start":671,"end":681,"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":26}},"argument":{"type":"Identifier","start":677,"end":680,"loc":{"start":{"line":19,"column":22},"end":{"line":19,"column":25},"identifierName":"err"},"name":"err"}}],"directives":[]}}]}}],"directives":[]}}}]}}}],"directives":[]},"comments":[]},"formatted":true,"resources":["snsusEast1S3BatchProcessNotifications","sqsusEast1Test","snsusEast1S3BatchProcessNotifications","snsusEast1S3BatchProcessNotifications"],"triggers":[]}},"rootNode":"10a5cd4a-4fd8-443a-a941-5a727a63a629","openFiles":["321bc1a2-9505-4f05-a344-9474383648a4","53f45614-d366-43e5-97aa-625345d6333c"],"currentFileId":"321bc1a2-9505-4f05-a344-9474383648a4","resources":{"cweS3BatchProcessTrigger":{"name":"cweS3BatchProcessTrigger","type":"CLOUD_WATCH","config":{"mode":0,"name":"S3BatchProcessTrigger","description":"","scheduleExpression":"rate(2 minutes)"},"globallyEditable":true,"usage":{"321bc1a2-9505-4f05-a344-9474383648a4":{"operations":{},"occurrence":1,"triggers":[{"mode":0,"name":"S3BatchProcessTrigger","description":"","scheduleExpression":"rate(2 minutes)"}]}}},"s3slappBatchProcessSample":{"name":"s3slappBatchProcessSample","type":"S3","config":{"mode":0,"bucket":{"region":"us-east-1","name":"slapp-batch-process-sample"}},"globallyEditable":false,"usage":{"321bc1a2-9505-4f05-a344-9474383648a4":{"operations":{"listObjects":[{"Bucket":"slapp-batch-process-sample","MaxKeys":100,"Prefix":""}],"deleteObject":[{"Bucket":"slapp-batch-process-sample","Key":"@{fileName}"}]},"occurrence":2,"triggers":[]}}},"snsusEast1S3BatchProcessNotifications":{"name":"snsusEast1S3BatchProcessNotifications","type":"SNS","config":{"topicMode":0,"topicName":"S3BatchProcessNotifications","topicArn":"arn:aws:sns:us-east-1:480964559519:S3BatchProcessNotifications","topicRegion":"us-east-1","isDirectSMS":false,"subscriptions":[{"type":"sms","endpoint":"+94779460639"}]},"globallyEditable":true,"usage":{"53f45614-d366-43e5-97aa-625345d6333c":{"operations":{"publish":[{"Message":"@{message}","Subject":"@{subject}","MessageAttributes":{},"MessageStructure":"String","TopicArn":"arn:aws:sns:us-east-1:480964559519:S3BatchProcessNotifications"}]},"occurrence":1,"triggers":[]}}},"sqsusEast1Test":{"name":"sqsusEast1Test","type":"SQS","config":{"mode":0,"existing":false,"name":"Test","url":"https://sqs.us-east-1.amazonaws.com/480964559519/Test","selectedRegion":"us-east-1","deliveryDelay":0,"deliveryDelayUnit":"seconds","useRedrivePolicy":false,"useSSE":false,"kmsCustomerMasterKey":"default","accountId":"480964559519","dataKeyReusePeriod":5,"queueType":"standardQueue","defaultVisibilityTimeout":30,"defaultVisibilityTimeoutUnit":"seconds","messageRetentionPeriod":4,"messageRetentionPeriodUnit":"days","maximumMessageSize":256,"receiveMessageWaitTime":0,"deadLetterQueueName":"","contentBasedDeduplication":false,"operation":2},"globallyEditable":true,"usage":{}}},"state":"CHANGED","packageJSON":{"dependencies":{"aws-sdk":{"name":"aws-sdk","version":"2.176.0","notRemovable":true},"slappforge-sdk":{"name":"@slappforge/slappforge-sdk","version":"0.0.3","notRemovable":true},"SL":"1.0.0"}},"changeExistingProject":false,"startX":0,"startY":0,"draggedResourceName":"SQS","draggedResourceType":"R","draggedResourceId":null,"additionalFiles":[]},"PROJECT_META":{"projectName":"S3BatchProcessSample","projectDescription":"This is a sample project to demonstrate cloudwatch triggered S3 batch processing with SNS status notifications.","projectVersion":"1.0.0","repoName":"S3BatchProcessSample","repoUrl":"https://github.com/sigmaidetest/S3BatchProcessSample","lastSave":1516771543484}}